<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Boxicons -->
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <!-- My CSS -->
    <title>Profile</title>
    <!--Google Font-->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <!--Stylesheet-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/static/Student/style.css">


    <title>Mess Management</title>
</head>

<body>


    <!-- SIDEBAR -->

    <!-- SIDEBAR -->
    <section id="sidebar">
        <a href="#" class="brand">
            <i class='bx bxs-smile'></i>
            <span class="text">Mess Admin</span>
        </a>
        <ul class="side-menu top">
            <li >
                <a href="/index">
                    <i class='bx bxs-dashboard'></i>
                    <span class="text">Dashboard</span>
                </a>
            </li>
            <li>

                <a href="/menu">
                    <i class='bx bx-dish'></i>
                    <span class="text">Menu</span>
                </a>
            </li>

            <!-- <li>
				<a href="#">
					<i class='bx bx-user-plus' ></i>
					<span class="text">Add Student</span>
				</a>
			</li> -->
            <li class="active">
                <a href="/students">
                    <i class='bx bxs-group'></i>
                    <span class="text">Students

                    </span>
                </a>
            </li>
            <li>
                <a href="/todayAttendees">
                    <i class='bx bxs-group'></i>
                    <span class="text">Today Attendees

                    </span>
                </a>
            </li>
        </ul>
        <ul class="side-menu">
            <li>
                <a href="/settings">
                    <i class='bx bxs-cog'></i>
                    <span class="text">Settings</span>
                </a>
            </li>
            <li>
                <a href="/logout" class="logout">
                    <i class='bx bxs-log-out-circle'></i>
                    <span class="text">Logout</span>
                </a>
            </li>
        </ul>
    </section>


    <!-- CONTENT -->
    <section id="content">
        <nav>
            <i class='bx bx-menu'></i>
            <!-- <a href="#" class="nav-link">Categories</a> -->
            <form action="#">
                <div class="form-input">
                    <!-- <input type="search" placeholder="Search..."> -->
                    <!-- <button type="submit" class="search-btn"><i class='bx bx-search'></i></button> -->
                </div>
            </form>
            <!-- <a href="#" class="notification"> -->
            <!-- <i class='bx bxs-bell'></i> -->
            <!-- <span class="num">8</span> -->
            </a>
        </nav>
        <main>

            <div class="student-profile py-4">

                <div class="profile-container">
                    <div class="row">
                        <a href="/base">
                            <style>
                                span {
                                    text-align: right;
                                }
                            </style>
                        </a>
                        <div class="col-lg-4">
                            <div class="card shadow-sm">
                                <div class="card-header bg-transparent text-center">

                                    <a href="#" class="Myprofile">
                                        <style>
                                            .Myprofile img {
                                                width: 200px;
                                                height: 200px;
                                                object-fit: cover;
                                                border-radius: 50%;
                                            }
                                        </style>
                                        <img src="https://source.unsplash.com/600x300/?student" alt="Avatar" ,
                                            width="400" height="400">
                                    </a>

                                    <h3 id="name"></h3>
                                </div>
                                <!-- <div class="card-body">
                          <p class="mb-0"><strong class="pr-1">Student ID:</strong>321000001</p>
                          <p class="mb-0"><strong class="pr-1">Class:</strong>4</p>
                          <p class="mb-0"><strong class="pr-1">Section:</strong>A</p>
                        </div> -->
                            </div>
                        </div>
                        <div class="col-lg-8">



                            <div class="card shadow-sm">
                                <div class="card-header bg-transparent border-0">
                                    <h3 class="mb-0"><i class="far fa-clone pr-1"></i>General Information</h3>
                                </div>
                                <div class="card-body pt-0">
                                    <table class="table table-bordered">
                                        <tr>
                                            <th width="30%">Email</th>
                                            <td width="2%">:</td>
                                            <td id="email">{{email}}</td>
                                        </tr>

                                        <tr>
                                            <th width="30%">Gender</th>
                                            <td width="2%">:</td>
                                            <td id="gender"></td>
                                        </tr>
                                        <tr>
                                            <th width="30%">CNIC</th>
                                            <td width="2%">:</td>
                                            <td id="cnic"></td>
                                        </tr>
                                        <tr>
                                            <th width="30%">Phone</th>
                                            <td width="2%">:</td>
                                            <td id="phone"></td>
                                        </tr>
                                        <tr>
                                            <th width="30%">Payment Status</th>
                                            <td width="2%">:</td>
                                            <td id="status"></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div style="height: 26px"></div>
                            <div class="card shadow-sm">
                                <div class="card-header bg-transparent border-0">
                                    <h3 class="mb-0"><i class="far fa-clone pr-1"></i>Bio</h3>
                                </div>
                                <div class="card-body pt-0">
                                    <p id="bio"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>




        </main>
        <!-- MAIN -->
    </section>

    <script>

        $(document).ready(function () {
            // let menuTitle =new Array(7);

            // console.log(menuTitle);


            let email = document.getElementById('email').innerText

            $.ajax({
                url: `/api/User/${email}`, // url where to submit the request
                type: "GET",
                // type of action POST || GET
                dataType: 'json',

                contentType: "application/json; charset=utf-8",

                success: function (result) {
                    console.log(
                        result
                    )
                    let temp_html = `<p id="bio">${result['bio']}</p>`
                    let pay_html1 = `<td id="cnic">${result['cnic']}</td>`
                    let pay_html2 = `<td id="phone">${result['phone']}</td>`
                    let pay_html3 = `<td id="gender">${result['gender']}</td>`
                    let pay_html4 = `<h3 id="name">${result['fullName']}</h3>`
                    let pay_html = `<td id="status">${result['paymentStatus']}</td>`

                    $("#bio").html(temp_html);
                    $("#cnic").html(pay_html1);
                    $("#phone").html(pay_html2);
                    $("#gender").html(pay_html3);
                    $("#name").html(pay_html4);
                    $("#status").html(pay_html);

                    console.log("Working")

                },
                error: function (xhr, resp, text) {
                    console.log(xhr, resp, text);
                    $('body').append('<h2>Error Occured</h2>')
                }
            })

        });
    </script>



    <script src="static/Student/script.js"></script>
</body>

</html>